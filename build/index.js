(()=>{"use strict";var l,e={543:()=>{const l=window.wp.blocks,e=window.wp.i18n,o=window.wp.blockEditor,t=window.wp.components,a=window.wp.element,c=window.wp.data,r=window.wp.primitives,s=window.ReactJSXRuntime,i=(0,s.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(r.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),n=(0,s.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(r.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),d=JSON.parse('{"UU":"telex/woo-product-calculator"}');(0,l.registerBlockType)(d.UU,{edit:function({attributes:l,setAttributes:r}){const{calculatorTitle:d,productId:u,steps:p,priceCalculation:h,buttonText:_}=l,[x,w]=(0,a.useState)(0),[m,v]=(0,a.useState)(null),j=(0,c.useSelect)(l=>{const{getEntityRecords:e}=l("core");return e("postType","product",{per_page:-1})||[]},[]),b=[{label:(0,e.__)("Select a product...","woo-product-calculator"),value:0},...j.map(l=>({label:l.title.rendered,value:l.id}))],f=j.find(l=>l.id===u),g=(0,o.useBlockProps)({className:"woo-calculator-editor"}),C=[{label:(0,e.__)("Text","woo-product-calculator"),value:"text"},{label:(0,e.__)("Number","woo-product-calculator"),value:"number"},{label:(0,e.__)("Dropdown","woo-product-calculator"),value:"select"},{label:(0,e.__)("Radio","woo-product-calculator"),value:"radio"},{label:(0,e.__)("Checkbox","woo-product-calculator"),value:"checkbox"},{label:(0,e.__)("Textarea","woo-product-calculator"),value:"textarea"},{label:(0,e.__)("File Upload","woo-product-calculator"),value:"file"}],N=(l,e,o,t)=>{const a=[...p];a[l].fields[e][o]=t,r({steps:a})},y=(l,e,o,t,a)=>{const c=[...p];c[l].fields[e].options[o][t]=a,r({steps:c})},k=p[x],S=null!==m&&k?.fields?.[m];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.InspectorControls,{children:[(0,s.jsxs)(t.PanelBody,{title:(0,e.__)("Product Selection","woo-product-calculator"),initialOpen:!0,children:[(0,s.jsx)(t.SelectControl,{label:(0,e.__)("Linked Product","woo-product-calculator"),value:u,options:b,onChange:l=>r({productId:parseInt(l)}),help:(0,e.__)("Select the WooCommerce product this calculator will add to cart","woo-product-calculator")}),!u&&(0,s.jsx)(t.Notice,{status:"warning",isDismissible:!1,children:(0,e.__)("Please select a product for this calculator to work properly.","woo-product-calculator")}),f&&(0,s.jsx)("div",{className:"product-info",children:(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:(0,e.__)("Selected:","woo-product-calculator")})," ",f.title.rendered]})})]}),(0,s.jsxs)(t.PanelBody,{title:(0,e.__)("Calculator Settings","woo-product-calculator"),children:[(0,s.jsx)(t.TextControl,{label:(0,e.__)("Calculator Title","woo-product-calculator"),value:d,onChange:l=>r({calculatorTitle:l})}),(0,s.jsx)(t.TextControl,{label:(0,e.__)("Button Text","woo-product-calculator"),value:_,onChange:l=>r({buttonText:l})})]}),(0,s.jsxs)(t.PanelBody,{title:(0,e.__)("Price Calculation","woo-product-calculator"),initialOpen:!1,children:[(0,s.jsx)(t.ToggleControl,{label:(0,e.__)("Enable Price Calculation","woo-product-calculator"),checked:h.enabled,onChange:l=>r({priceCalculation:{...h,enabled:l}})}),h.enabled&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.Notice,{status:"info",isDismissible:!1,children:(0,e.__)("Use field names in your formula. Example: width * height * quantity * 0.01","woo-product-calculator")}),(0,s.jsx)(t.TextControl,{label:(0,e.__)("Formula","woo-product-calculator"),value:h.formula,onChange:l=>r({priceCalculation:{...h,formula:l}}),help:(0,e.__)("Mathematical formula using field names","woo-product-calculator")})]})]}),(0,s.jsxs)(t.PanelBody,{title:(0,e.__)("Steps","woo-product-calculator"),initialOpen:!0,children:[(0,s.jsx)("div",{className:"calculator-steps-list",children:p.map((l,e)=>(0,s.jsxs)("div",{className:"calculator-step-item "+(e===x?"active":""),onClick:()=>w(e),children:[(0,s.jsx)("span",{children:l.title}),(0,s.jsx)(t.Button,{icon:i,isDestructive:!0,isSmall:!0,onClick:l=>{l.stopPropagation(),(l=>{const e=p.filter((e,o)=>o!==l);r({steps:e}),x>=e.length&&w(Math.max(0,e.length-1))})(e)}})]},e))}),(0,s.jsx)(t.Button,{icon:n,variant:"secondary",onClick:()=>{const l=[...p,{title:(0,e.__)("New Step","woo-product-calculator"),fields:[]}];r({steps:l}),w(l.length-1)},className:"calculator-add-step",children:(0,e.__)("Add Step","woo-product-calculator")})]}),k&&(0,s.jsxs)(t.PanelBody,{title:(0,e.__)("Step Settings","woo-product-calculator"),initialOpen:!0,children:[(0,s.jsx)(t.TextControl,{label:(0,e.__)("Step Title","woo-product-calculator"),value:k.title,onChange:l=>((l,e,o)=>{const t=[...p];t[l].title=o,r({steps:t})})(x,0,l)}),(0,s.jsxs)("div",{className:"calculator-fields-list",children:[(0,s.jsx)("h4",{children:(0,e.__)("Fields","woo-product-calculator")}),k.fields?.map((l,e)=>(0,s.jsxs)("div",{className:"calculator-field-item "+(e===m?"active":""),onClick:()=>v(e),children:[(0,s.jsxs)("span",{children:[l.label," (",l.type,")"]}),(0,s.jsx)(t.Button,{icon:i,isDestructive:!0,isSmall:!0,onClick:l=>{l.stopPropagation(),((l,e)=>{const o=[...p];o[l].fields=o[l].fields.filter((l,o)=>o!==e),r({steps:o}),v(null)})(x,e)}})]},e))]}),(0,s.jsx)(t.Button,{icon:n,variant:"secondary",onClick:()=>(l=>{const o=[...p];o[l].fields||(o[l].fields=[]),o[l].fields.push({type:"text",label:(0,e.__)("New Field","woo-product-calculator"),name:"field_"+Date.now(),required:!1,options:[]}),r({steps:o}),v(o[l].fields.length-1)})(x),className:"calculator-add-field",children:(0,e.__)("Add Field","woo-product-calculator")})]}),S&&(0,s.jsxs)(t.PanelBody,{title:(0,e.__)("Field Settings","woo-product-calculator"),initialOpen:!0,children:[(0,s.jsx)(t.SelectControl,{label:(0,e.__)("Field Type","woo-product-calculator"),value:S.type,options:C,onChange:l=>N(x,m,"type",l)}),(0,s.jsx)(t.TextControl,{label:(0,e.__)("Label","woo-product-calculator"),value:S.label,onChange:l=>N(x,m,"label",l)}),(0,s.jsx)(t.TextControl,{label:(0,e.__)("Field Name","woo-product-calculator"),value:S.name,onChange:l=>N(x,m,"name",l),help:(0,e.__)("Used in formulas and cart data","woo-product-calculator")}),(0,s.jsx)(t.ToggleControl,{label:(0,e.__)("Required","woo-product-calculator"),checked:S.required,onChange:l=>N(x,m,"required",l)}),["select","radio","checkbox"].includes(S.type)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h4",{children:(0,e.__)("Options","woo-product-calculator")}),S.options?.map((l,o)=>(0,s.jsxs)("div",{className:"calculator-option-item",children:[(0,s.jsx)(t.TextControl,{label:(0,e.__)("Label","woo-product-calculator"),value:l.label,onChange:l=>y(x,m,o,"label",l)}),(0,s.jsx)(t.TextControl,{label:(0,e.__)("Value","woo-product-calculator"),value:l.value,onChange:l=>y(x,m,o,"value",l)}),(0,s.jsx)(t.Button,{icon:i,isDestructive:!0,isSmall:!0,onClick:()=>((l,e,o)=>{const t=[...p];t[l].fields[e].options=t[l].fields[e].options.filter((l,e)=>e!==o),r({steps:t})})(x,m,o),children:(0,e.__)("Remove","woo-product-calculator")})]},o)),(0,s.jsx)(t.Button,{icon:n,variant:"secondary",onClick:()=>((l,o)=>{const t=[...p];t[l].fields[o].options||(t[l].fields[o].options=[]),t[l].fields[o].options.push({label:(0,e.__)("Option","woo-product-calculator"),value:"option_"+Date.now()}),r({steps:t})})(x,m),children:(0,e.__)("Add Option","woo-product-calculator")})]}),"number"===S.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.__experimentalNumberControl,{label:(0,e.__)("Min Value","woo-product-calculator"),value:S.min,onChange:l=>N(x,m,"min",l)}),(0,s.jsx)(t.__experimentalNumberControl,{label:(0,e.__)("Max Value","woo-product-calculator"),value:S.max,onChange:l=>N(x,m,"max",l)}),(0,s.jsx)(t.__experimentalNumberControl,{label:(0,e.__)("Step","woo-product-calculator"),value:S.step,onChange:l=>N(x,m,"step",l)})]})]})]}),(0,s.jsx)("div",{...g,children:(0,s.jsxs)("div",{className:"calculator-preview",children:[(0,s.jsx)("h3",{children:d}),!u&&(0,s.jsx)(t.Notice,{status:"warning",isDismissible:!1,children:(0,e.__)("Please select a product in the block settings.","woo-product-calculator")}),f&&(0,s.jsx)("div",{className:"selected-product-info",children:(0,s.jsxs)("p",{children:[(0,e.__)("Adding to cart:","woo-product-calculator")," ",(0,s.jsx)("strong",{children:f.title.rendered})]})}),(0,s.jsx)("div",{className:"calculator-steps-preview",children:p.map((l,e)=>(0,s.jsxs)("div",{className:"step-indicator "+(e===x?"active":""),children:[(0,s.jsx)("span",{className:"step-number",children:e+1}),(0,s.jsx)("span",{className:"step-title",children:l.title})]},e))}),k&&(0,s.jsxs)("div",{className:"calculator-step-content",children:[(0,s.jsx)("h4",{children:k.title}),k.fields?.length>0?(0,s.jsx)("div",{className:"calculator-fields",children:k.fields.map((l,e)=>(0,s.jsxs)("div",{className:"calculator-field",children:[(0,s.jsxs)("label",{children:[l.label,l.required&&(0,s.jsx)("span",{className:"required",children:"*"})]}),(0,s.jsx)("div",{className:"field-type-indicator",children:l.type})]},e))}):(0,s.jsx)("p",{className:"no-fields",children:(0,e.__)("No fields added yet. Add fields in the sidebar.","woo-product-calculator")})]}),(0,s.jsxs)("div",{className:"calculator-navigation",children:[(0,s.jsx)(t.Button,{variant:"secondary",disabled:0===x,children:(0,e.__)("Previous","woo-product-calculator")}),(0,s.jsx)(t.Button,{variant:"primary",children:x===p.length-1?_:(0,e.__)("Next","woo-product-calculator")})]})]})})]})}})}},o={};function t(l){var a=o[l];if(void 0!==a)return a.exports;var c=o[l]={exports:{}};return e[l](c,c.exports,t),c.exports}t.m=e,l=[],t.O=(e,o,a,c)=>{if(!o){var r=1/0;for(d=0;d<l.length;d++){for(var[o,a,c]=l[d],s=!0,i=0;i<o.length;i++)(!1&c||r>=c)&&Object.keys(t.O).every(l=>t.O[l](o[i]))?o.splice(i--,1):(s=!1,c<r&&(r=c));if(s){l.splice(d--,1);var n=a();void 0!==n&&(e=n)}}return e}c=c||0;for(var d=l.length;d>0&&l[d-1][2]>c;d--)l[d]=l[d-1];l[d]=[o,a,c]},t.o=(l,e)=>Object.prototype.hasOwnProperty.call(l,e),(()=>{var l={57:0,350:0};t.O.j=e=>0===l[e];var e=(e,o)=>{var a,c,[r,s,i]=o,n=0;if(r.some(e=>0!==l[e])){for(a in s)t.o(s,a)&&(t.m[a]=s[a]);if(i)var d=i(t)}for(e&&e(o);n<r.length;n++)c=r[n],t.o(l,c)&&l[c]&&l[c][0](),l[c]=0;return t.O(d)},o=globalThis.webpackChunkwoo_product_calculator=globalThis.webpackChunkwoo_product_calculator||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))})();var a=t.O(void 0,[350],()=>t(543));a=t.O(a)})();